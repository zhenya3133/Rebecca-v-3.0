# MemoryManager - ÐŸÐ¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ

## ÐžÐ±Ð·Ð¾Ñ€

MemoryManager - ÑÑ‚Ð¾ ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ, Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ, Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² Ð¼Ð½Ð¾Ð³Ð¾ÑÐ»Ð¾Ð¹Ð½Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ðµ. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ñ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ð¼Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°Ð¼Ð¸, ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹.

## ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

### ðŸ§  ÐœÐ½Ð¾Ð³Ð¾ÑÐ»Ð¾Ð¹Ð½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ð°Ð¼ÑÑ‚Ð¸

1. **CoreMemory (CORE)** - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ„Ð°ÐºÑ‚Ñ‹ Ð¸ ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹
2. **EpisodicMemory (EPISODIC)** - Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
3. **SemanticMemory (SEMANTIC)** - ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ð¸ Ð¸ Ð·Ð½Ð°Ð½Ð¸Ñ
4. **ProceduralMemory (PROCEDURAL)** - ÐŸÑ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð¸ Ñ€Ð°Ð±Ð¾Ñ‡Ð¸Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹
5. **VaultMemory (VAULT)** - Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
6. **SecurityMemory (SECURITY)** - Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

### âš¡ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸

- **Ð’Ñ‹ÑÐ¾ÐºÐ¾Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ** Ñ LRU Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¾Ð¼
- **Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ð¼Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°Ð¼Ð¸** (Qdrant, ChromaDB, Weaviate)
- **AdaptiveBlueprintTracker** Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹
- **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ** Ð¿Ð°Ð¼ÑÑ‚Ð¸
- **Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼**
- **Comprehensive Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ** Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- **ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°** Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ

```python
from memory_manager import MemoryManager, create_memory_manager, CORE, EPISODIC

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
manager = create_memory_manager()

# Ð—Ð°Ð¿ÑƒÑÐº Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°
await manager.start()

# Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
core_id = await manager.store(
    layer=CORE,
    data="Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°ÐºÑ‚ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹",
    metadata={"source": "system"},
    tags=["core", "system"],
    priority=8
)

# Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
core_data = await manager.retrieve(CORE)
print(f"ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ {len(core_data)} Ð·Ð°Ð¿Ð¸ÑÐµÐ¹")

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
await manager.stop()
```

### ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

```python
from memory_manager import MemoryManager
from vector_store_client import VectorStoreConfig

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
config = {
    "cache_size": 2000,
    "cache_ttl": 7200,  # 2 Ñ‡Ð°ÑÐ°
    "optimization_interval": 300,  # 5 Ð¼Ð¸Ð½ÑƒÑ‚
    "vector_store": {
        "provider": "qdrant",
        "base_url": "http://localhost:6333",
        "vector_size": 384,
        "distance_metric": "cosine"
    }
}

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°
manager = create_memory_manager(config)
await manager.start()
```

## API Reference

### MemoryManager Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹

#### store(layer, data, metadata=None, tags=None, priority=5)

Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `layer` (str): Ð¡Ð»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸ (CORE, EPISODIC, SEMANTIC, etc.)
- `data` (Any): Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
- `metadata` (Dict): Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ
- `tags` (List[str]): Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚ÐµÐ³Ð¾Ð²
- `priority` (int): ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐ¸ (0-10)

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** ID ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
semantic_id = await manager.store(
    layer=SEMANTIC,
    data="Ð˜ÑÐºÑƒÑÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ - ÑÑ‚Ð¾ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ",
    metadata={"category": "AI", "complexity": "medium"},
    tags=["AI", "definition"],
    priority=9
)
```

#### retrieve(layer, query=None, filters=None, limit=10)

Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ»Ð¾Ñ Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `layer` (str): Ð¡Ð»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸
- `query` (str): ÐŸÐ¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ
- `filters` (Dict): Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ°
- `limit` (int): ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð¿Ð¸ÑÐµÐ¹

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
# Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ ÑÐ»Ð¾Ñ
all_core = await manager.retrieve(CORE)

# ÐŸÐ¾Ð¸ÑÐº Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸
filtered_results = await manager.retrieve(
    layer=SEMANTIC,
    query="Ð¸ÑÐºÑƒÑÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚",
    filters={"complexity": "medium"},
    limit=5
)
```

#### update(layer, item_id, data, metadata=None)

ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `layer` (str): Ð¡Ð»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸
- `item_id` (str): ID Ð·Ð°Ð¿Ð¸ÑÐ¸
- `data` (Any): ÐÐ¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- `metadata` (Dict): ÐÐ¾Ð²Ñ‹Ðµ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** True Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
success = await manager.update(
    layer=CORE,
    item_id=core_id,
    data="ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð°ÐºÑ‚",
    metadata={"updated": True}
)
```

#### delete(layer, item_id)

Ð£Ð´Ð°Ð»ÑÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð¸Ð· Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `layer` (str): Ð¡Ð»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸
- `item_id` (str): ID Ð·Ð°Ð¿Ð¸ÑÐ¸

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** True Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
success = await manager.delete(CORE, item_id)
```

#### search_across_layers(query, layers=None, limit=20)

Ð˜Ñ‰ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ Ð²ÑÐµÐ¼ ÑÐ»Ð¾ÑÐ¼ Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `query` (str): ÐŸÐ¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ
- `layers` (List[str]): Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑÐ»Ð¾ÐµÐ² (None = Ð²ÑÐµ ÑÐ»Ð¾Ð¸)
- `limit` (int): ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð½Ð°Ð¹Ð´ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð¸Ð· Ð²ÑÐµÑ… ÑÐ»Ð¾ÐµÐ²

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
results = await manager.search_across_layers(
    query="Ñ€ÐµÐ°ÐºÑ‚Ð¾Ñ€",
    layers=[CORE, SEMANTIC],
    limit=10
)
```

#### get_layer_statistics()

Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÑƒÑŽ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð¿Ð¾ Ð²ÑÐµÐ¼ ÑÐ»Ð¾ÑÐ¼ Ð¿Ð°Ð¼ÑÑ‚Ð¸.

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ ÑÐ¾ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¾Ð¹

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
stats = await manager.get_layer_statistics()
print(f"Ð’ÑÐµÐ³Ð¾ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹: {stats['memory_context']['total_memory_entries']}")
print(f"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÑÑˆÐ°: {stats['cache']['utilization']:.2%}")
```

#### optimize_memory()

ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð¿Ð°Ð¼ÑÑ‚ÑŒ Ð¸ ÐºÑÑˆ.

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
results = await manager.optimize_memory()
print(f"Ð£Ð´Ð°Ð»ÐµÐ½Ð¾ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹: {results['total_items_removed']}")
print(f"Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸: {results['duration']:.2f}s")
```

#### sync_with_orchestrator()

Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼.

**Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:** Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼Ð¸ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
sync_result = await manager.sync_with_orchestrator()
if sync_result['success']:
    print(f"Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾, trace_id: {sync_result['trace_id']}")
```

## AdaptiveBlueprintTracker

Ð¢Ñ€ÐµÐºÐµÑ€ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð²ÐµÑ€ÑÐ¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð²Ð»Ð¸ÑÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹.

### ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹

#### record_blueprint(blueprint, metadata=None, change_type="update")

Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð½Ð¾Ð²Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
blueprint = {
    "version": "2.0",
    "components": {
        "core": {"status": "enhanced"},
        "ai_processor": {"status": "active"}
    }
}

version = await manager.blueprint_tracker.record_blueprint(
    blueprint=blueprint,
    metadata={"author": "developer"},
    change_type="enhancement",
    change_description="Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ AI Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ñ€"
)
```

#### compare_blueprints(version1, version2, detailed=True)

Ð¡Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ Ð´Ð²Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
comparison = await manager.blueprint_tracker.compare_blueprints(1, 2)
print(f"Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾: {len(comparison['detailed_changes']['added'])}")
print(f"Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¾: {len(comparison['detailed_changes']['modified'])}")
```

#### link_resource(identifier, resource, resource_type="unknown")

Ð¡Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÑ‚ Ñ€ÐµÑÑƒÑ€Ñ Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð¾Ð¹.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
await manager.blueprint_tracker.link_resource(
    identifier="api_service",
    resource={"endpoint": "/api/v1", "version": "1.0"},
    resource_type="microservice",
    dependency_level=3
)
```

#### analyze_impact(from_version, to_version)

ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð²Ð»Ð¸ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð¼ÐµÐ¶Ð´Ñƒ Ð²ÐµÑ€ÑÐ¸ÑÐ¼Ð¸.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```python
impact = await manager.blueprint_tracker.analyze_impact(1, 2)
print(f"ÐžÑ†ÐµÐ½ÐºÐ° Ð²Ð»Ð¸ÑÐ½Ð¸Ñ: {impact.impact_score:.2f}")
print(f"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ Ñ€Ð¸ÑÐºÐ°: {impact.risk_assessment}")
print(f"Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸: {impact.recommendations}")
```

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ MemoryManager

```python
config = {
    # ÐšÑÑˆ
    "cache_size": 1000,              # Ð Ð°Ð·Ð¼ÐµÑ€ ÐºÑÑˆÐ°
    "cache_ttl": 3600,               # TTL ÐºÑÑˆÐ° Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…
    
    # ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ
    "optimization_interval": 300,    # Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…
    
    # Ð’ÐµÐºÑ‚Ð¾Ñ€Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ
    "vector_store": {
        "provider": "qdrant",        # qdrant, chroma, weaviate
        "base_url": "http://localhost:6333",
        "api_key": None,
        "vector_size": 384,
        "distance_metric": "cosine", # cosine, l2, dot
        "embedding_provider": "local", # local, openai, ollama
        "embedding_model": "all-MiniLM-L6-v2",
        "max_retries": 3,
        "timeout": 30.0
    }
}
```

### Ð’ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰:

1. **Qdrant** - Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
2. **ChromaDB** - Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
3. **Weaviate** - Ð”Ð»Ñ Ð¾Ð±Ð»Ð°Ñ‡Ð½Ñ‹Ñ… Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹
4. **In-Memory** - Fallback Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… ÑÐ»ÑƒÑ‡Ð°ÐµÐ²

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

```python
# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ TTL
# TTL Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÑÐ»Ð¾Ñ Ð¸ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð° Ð·Ð°Ð¿Ð¸ÑÐ¸

TTL_BASE_VALUES = {
    CORE: 7200,        # 2 Ñ‡Ð°ÑÐ°
    EPISODIC: 86400,   # 24 Ñ‡Ð°ÑÐ°  
    SEMANTIC: 604800,  # 7 Ð´Ð½ÐµÐ¹
    PROCEDURAL: 2592000, # 30 Ð´Ð½ÐµÐ¹
    VAULT: 31536000,   # 1 Ð³Ð¾Ð´
    SECURITY: 7776000  # 90 Ð´Ð½ÐµÐ¹
}

# ÐœÐ¾Ð´Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð°:
# priority >= 8: TTL * 2
# priority <= 2: TTL * 0.5
```

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸

```python
stats = await manager.get_layer_statistics()

# Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ ÑÐ»Ð¾ÑÐ¼
for layer, layer_stats in stats['layer_statistics'].items():
    print(f"{layer}:")
    print(f"  Ð’ÑÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²: {layer_stats['total_items']}")
    print(f"  Cache hit ratio: {layer_stats['cache_hit_ratio']:.2%}")
    print(f"  Ð¡Ñ€ÐµÐ´Ð½ÐµÐµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°: {layer_stats['average_access_time']:.4f}s")

# Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÐºÑÑˆÐµ
cache_stats = stats['cache']
print(f"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÑÑˆÐ°: {cache_stats['utilization']:.2%}")

# Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð½Ð¾Ð¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ
vector_stats = stats['vector_store']
print(f"ÐŸÑ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€: {vector_stats['current_provider']}")
```

### Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:

```python
# Ð£Ñ€Ð¾Ð²Ð½Ð¸ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:
# - INFO: ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸
# - DEBUG: ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ
# - WARNING: ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ
# - ERROR: ÐžÑˆÐ¸Ð±ÐºÐ¸

import logging

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑƒÑ€Ð¾Ð²Ð½Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
logging.basicConfig(level=logging.DEBUG)

# Ð›Ð¾Ð³Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸ÐµÐ¼:
# - Ð’Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸
# - ID Ð·Ð°Ð¿Ð¸ÑÐµÐ¹
# - Ð¡Ð»Ð¾ÐµÐ² Ð¿Ð°Ð¼ÑÑ‚Ð¸
# - Ð Ð°Ð·Ð¼ÐµÑ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…
# - Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
```

## ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°ÐµÑ‚ robust Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¾ÑˆÐ¸Ð±Ð¾Ðº:

```python
try:
    # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    item_id = await manager.store(CORE, "data", metadata={})
    
    # Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    results = await manager.retrieve(CORE, query="search")
    
    # ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    success = await manager.update(CORE, item_id, "new_data")
    
    # Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    deleted = await manager.delete(CORE, item_id)
    
except ValueError as e:
    # ÐÐµÐ´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹
    print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²: {e}")
    
except RuntimeError as e:
    # ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
    print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ: {e}")
    
except Exception as e:
    # ÐÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸
    print(f"ÐÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°: {e}")
```

## ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸

1. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÑÑˆÐ°:**
   - Ð Ð°Ð·Ð¼ÐµÑ€ ÐºÑÑˆÐ°: 1000-5000 Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð´Ð»Ñ ÑÑ€ÐµÐ´Ð½Ð¸Ñ… Ð½Ð°Ð³Ñ€ÑƒÐ·Ð¾Ðº
   - TTL: Ð¡Ð¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…

2. **Ð’ÐµÐºÑ‚Ð¾Ñ€Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ:**
   - Qdrant Ð´Ð»Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ñ… Ð½Ð°Ð³Ñ€ÑƒÐ·Ð¾Ðº
   - ChromaDB Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
   - Weaviate Ð´Ð»Ñ Ð¾Ð±Ð»Ð°Ñ‡Ð½Ñ‹Ñ… Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ð¹

3. **ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ:**
   - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5-30 Ð¼Ð¸Ð½ÑƒÑ‚
   - Ð ÑƒÑ‡Ð½Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿ÐµÑ€ÐµÐ´ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼Ð¸ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°Ð¼Ð¸

4. **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³:**
   - Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
   - ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ cache hit ratio
   - ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð°

### Ð‘ÐµÐ½Ñ‡Ð¼Ð°Ñ€ÐºÐ¸

Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸:

- **Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸:** 10-50ms
- **Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸:** 5-25ms  
- **ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ ÑÐ»Ð¾ÑÐ¼:** 50-200ms
- **ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ:** 100-1000ms (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ Ð¾Ð±ÑŠÐµÐ¼Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…)
- **Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ:** 200-500ms

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€

```python
import asyncio
from memory_manager import create_memory_manager, CORE, SEMANTIC, EPISODIC

async def main():
    # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°
    manager = create_memory_manager({
        "cache_size": 1000,
        "cache_ttl": 3600,
        "optimization_interval": 300
    })
    
    try:
        # Ð—Ð°Ð¿ÑƒÑÐº
        await manager.start()
        
        # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
        core_id = await manager.store(
            layer=CORE,
            data="Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°",
            metadata={"init_time": "2025-10-28T03:55:14"},
            tags=["system", "init"],
            priority=8
        )
        
        # ÐŸÐ¾Ð¸ÑÐº Ð¸ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ
        results = await manager.search_across_layers(
            query="ÑÐ¸ÑÑ‚ÐµÐ¼Ð°",
            layers=[CORE, EPISODIC],
            limit=10
        )
        
        # ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
        stats = await manager.get_layer_statistics()
        print(f"Ð’ÑÐµÐ³Ð¾ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹: {stats['memory_context']['total_memory_entries']}")
        
        # ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ
        await manager.optimize_memory()
        
        # Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ
        sync_result = await manager.sync_with_orchestrator()
        print(f"Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ: {sync_result['success']}")
        
    finally:
        await manager.stop()

if __name__ == "__main__":
    asyncio.run(main())
```

### Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Blueprint Tracker

```python
async def manage_architecture():
    manager = create_memory_manager()
    await manager.start()
    
    try:
        # Ð—Ð°Ð¿Ð¸ÑÑŒ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹
        blueprint = {
            "version": "1.0",
            "components": {
                "memory": {"status": "active"},
                "vector_store": {"status": "active"}
            }
        }
        
        version = await manager.blueprint_tracker.record_blueprint(
            blueprint=blueprint,
            change_type="initial",
            change_description="ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°"
        )
        
        # Ð¡Ð²ÑÐ·Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ°
        await manager.blueprint_tracker.link_resource(
            identifier="main_db",
            resource={"type": "postgresql", "version": "14"},
            resource_type="database",
            dependency_level=2
        )
        
        # ÐÐ½Ð°Ð»Ð¸Ð· Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ (Ð¿Ñ€Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸)
        impact = await manager.blueprint_tracker.analyze_impact(1, 2)
        print(f"Ð’Ð»Ð¸ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹: {impact.impact_score:.2f}")
        
    finally:
        await manager.stop()
```

## Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ»Ð¾Ñ Ð¿Ð°Ð¼ÑÑ‚Ð¸

1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ ÑÐ»Ð¾Ñ Ð¿Ð°Ð¼ÑÑ‚Ð¸
2. Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐµÐ³Ð¾ Ð² MemoryContext
3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñƒ Ð´Ð»Ñ ÑÐ»Ð¾Ñ
4. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ TTL

```python
# 1. ÐÐ¾Ð²Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸
class CustomMemory:
    def __init__(self):
        self.data = {}
    
    async def store_custom(self, key, value):
        self.data[key] = value
    
    async def get_custom(self, key):
        return self.data.get(key)

# 2. Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð² MemoryContext
CUSTOM = "CUSTOM"
MEMORY_LAYERS[CUSTOM] = "CUSTOM"

# 3. Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð² Ñ„Ð°Ð±Ñ€Ð¸ÐºÑƒ
class MemoryLayerFactory:
    @staticmethod
    def create_layer(layer_type: str):
        if layer_type == CUSTOM:
            return CustomMemory()
```

### Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¼Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼Ð¸

```python
class CustomSyncHandler:
    async def sync_with_external_system(self, envelope):
        # Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¼Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼Ð¸
        pass
    
    async def receive_external_updates(self):
        # ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¸Ð·Ð²Ð½Ðµ
        pass

# Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð² MemoryManager
custom_handler = CustomSyncHandler()
```

## Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

MemoryManager Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¼Ð½Ð¾Ð³Ð¾ÑÐ»Ð¾Ð¹Ð½Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸:

- âœ… 6 ÑÐ»Ð¾ÐµÐ² Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð´Ð°Ð½Ð½Ñ‹Ñ…
- âœ… Ð’Ñ‹ÑÐ¾ÐºÐ¾Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- âœ… Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ð¼Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°Ð¼Ð¸  
- âœ… ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹
- âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ
- âœ… Comprehensive Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- âœ… Robust Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- âœ… Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð»ÐµÐ³ÐºÐ¾ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð° Ð´Ð»Ñ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°.
