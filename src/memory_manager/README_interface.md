# MemoryManager Interface

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≤ Rebecca Platform.

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `MemoryManager` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—ã–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Å–µ–º–∏ —Å–ª–æ—è–º–∏ –ø–∞–º—è—Ç–∏ —Å–∏—Å—Ç–µ–º—ã, –≤–∫–ª—é—á–∞—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- `IMemoryManager` - –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - `store(layer, data, metadata)` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - `retrieve(layer, query, filters)` - –ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö
  - `update(layer, item_id, data)` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - `delete(layer, item_id)` - –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - `list_layers()` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ–µ–≤

### 2. –°–ª–æ–∏ –ø–∞–º—è—Ç–∏

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–∏ –ø–∞–º—è—Ç–∏:

- `MemoryLayer.CORE` - –û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è —Ñ–∞–∫—Ç–æ–≤
- `MemoryLayer.EPISODIC` - –≠–ø–∏–∑–æ–¥–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- `MemoryLayer.SEMANTIC` - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤
- `MemoryLayer.PROCEDURAL` - –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- `MemoryLayer.VAULT` - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- `MemoryLayer.SECURITY` - –°–ª–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã

- `MemoryItem` - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∞–º—è—Ç–∏
- `MemoryFilter` - –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
- `PerformanceOptimizer` - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- `LayerFactory` - –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–µ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```python
from memory_manager_interface import MemoryManager, MemoryLayer, MemoryFilter

# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–º—è—Ç–∏
memory_manager = MemoryManager()

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
item_id = await memory_manager.store(
    MemoryLayer.CORE,
    {"fact": "Python - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è"},
    {"category": "programming", "confidence": 0.9}
)

# –ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö
results = await memory_manager.retrieve(
    MemoryLayer.CORE,
    "Python",
    MemoryFilter(metadata={"category": "programming"})
)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
await memory_manager.update(
    MemoryLayer.CORE,
    item_id,
    {"confidence": 0.95}
)

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
await memory_manager.delete(MemoryLayer.CORE, item_id)
```

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

```python
# –§–∏–ª—å—Ç—Ä –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
filter_obj = MemoryFilter(metadata={"category": "programming"})

# –§–∏–ª—å—Ç—Ä –ø–æ –≤—Ä–µ–º–µ–Ω–∏
filter_obj = MemoryFilter(time_range=(start_time, end_time))

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
filter_obj = MemoryFilter(
    metadata={"category": "programming"},
    time_range=(start_time, end_time)
)
```

### –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–ª–æ—è–º

```python
results = await memory_manager.search_across_layers(
    "Python",
    [MemoryLayer.CORE, MemoryLayer.SEMANTIC, MemoryLayer.EPISODIC]
)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```python
stats = memory_manager.get_memory_stats()
print(f"–ó–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['cache_stats']['hit_count']}")
print(f"–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à: {stats['cache_stats']['hit_rate']:.2%}")
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å:
- `MemoryContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞–º—è—Ç–∏
- `VectorStoreClient` - –∫–ª–∏–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–ª–æ—è–º–∏ –ø–∞–º—è—Ç–∏ (Core, Episodic, Semantic –∏ —Ç.–¥.)

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:
- –ò–Ω–¥–µ–∫—Å –ø–æ ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ò–Ω–¥–µ–∫—Å –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

```bash
python memory_manager/usage_example.py
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python memory_manager/test_interface.py
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—ç—à–∞

```python
memory_manager = MemoryManager(
    cache_ttl=300.0,        # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (—Å–µ–∫—É–Ω–¥—ã)
    max_cache_size=1000     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
)
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```python
# –û—á–∏—Å—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –∫—ç—à–∞
memory_manager.clear_cache()

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
memory_manager.clear_all_data()
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–ª–æ—è

```python
class CustomMemoryLayer:
    def store(self, data, metadata):
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        pass

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É
LayerFactory.register_layer(MemoryLayer.VAULT, CustomMemoryLayer)
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- asyncio
- dataclasses
- enum

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
memory_manager/
‚îú‚îÄ‚îÄ __init__.py                     # –≠–∫—Å–ø–æ—Ä—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
‚îú‚îÄ‚îÄ memory_manager_interface.py     # –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ usage_example.py               # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test_interface.py              # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ README_interface.md            # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IMemoryManager
- –ö–ª–∞—Å—Å MemoryManager —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MemoryContext –∏ VectorStoreClient
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–ª–æ–µ–≤ –ø–∞–º—è—Ç–∏
- –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Factory pattern –¥–ª—è —Å–ª–æ–µ–≤ –ø–∞–º—è—Ç–∏
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç—ã

üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∏—Å–∫–∞
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö