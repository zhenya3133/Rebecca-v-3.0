# IngestPipeline - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π IngestPipeline —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å MemoryManager.

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç—ã
- **PDF** (.pdf) - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **Markdown** (.md) - –ø–∞—Ä—Å–∏–Ω–≥ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º front matter
- **Word** (.docx) - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- **HTML** (.html) - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –æ—á–∏—Å—Ç–∫–∞ –æ—Ç —Ç–µ–≥–æ–≤
- **CSV** (.csv) - —Ç–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ —Ç–µ–∫—Å—Ç
- **JSON** (.json) - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
- **–¢–µ–∫—Å—Ç** (.txt) - —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
- **Python** (.py)
- **JavaScript/TypeScript** (.js, .ts)  
- **Java** (.java)
- **C/C++** (.c, .cpp, .h)
- **C#** (.cs)
- **Go** (.go)
- **Rust** (.rs)
- **PHP** (.php)
- **Ruby** (.rb)

### Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- README —Ñ–∞–π–ª—ã (–≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã)
- –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üöÄ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `ingest_document(file_path)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `process_git_repo(repo_url, branch)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤  
- `batch_process(sources)` - –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### üìä –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- `chunk_text(text, chunk_size, overlap)` - —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–æ–≤
- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Å—Ç–∏

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- `validate_file(file_path)` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–¥–æ 100MB)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### üß† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞–º—è—Ç—å—é
- **EpisodicMemory** - —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **SemanticMemory** - –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã
- **ProceduralMemory** - —à–∞–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **VaultMemory** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **BlueprintTracker** - —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from ingest.loader import IngestPipelineFactory

# –°–æ–∑–¥–∞–Ω–∏–µ pipeline
pipeline = IngestPipelineFactory.create_basic_pipeline(
    memory=memory_manager,
    dao=dao,
    bm25=bm25_index,
    vec=vector_index,
    graph_idx=graph_index,
    graph_view=graph_view,
    object_store=object_store
)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞
event = pipeline.ingest_document("document.pdf")
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ Markdown —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å front matter
md_content = """---
title: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
author: –ê–≤—Ç–æ—Ä
tags: [docs, technical]
date: 2025-10-28
---

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞...
"""

with open("doc.md", "w") as f:
    f.write(md_content)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è
event = pipeline.ingest_document("doc.md")
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
events = pipeline.process_git_repo(
    repo_url="https://github.com/user/repo.git",
    branch="main",
    process_readme=True,  # –í–∫–ª—é—á–∞–µ–º README
    process_source=True   # –í–∫–ª—é—á–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
)

print(f"–°–æ–∑–¥–∞–Ω–æ —Å–æ–±—ã—Ç–∏–π: {len(events)}")
```

### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
sources = [
    "document1.pdf",
    "readme.md", 
    "data.csv",
    "https://github.com/user/repo.git"
]

events = pipeline.batch_process(sources)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–æ–≤

```python
# –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
detailed_pipeline = IngestPipelineFactory.create_detailed_pipeline(
    memory, dao, bm25, vec, graph_idx, graph_view, object_store,
    chunk_size=1500
)

# –î–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏  
fast_pipeline = IngestPipelineFactory.create_fast_pipeline(
    memory, dao, bm25, vec, graph_idx, graph_view, object_store
)

# –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–∞–∑–º–µ—Ä
event = pipeline.ingest_document("doc.pdf", chunk_override=2000)
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **TextExtractor** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
2. **GitRepositoryProcessor** - —Ä–∞–±–æ—Ç–∞ —Å Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
3. **TextChunker** - —Ä–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏
4. **DocumentMetadata** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
5. **ChunkData** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–∞—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –°–ª–æ–∏ –ø–∞–º—è—Ç–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   VaultMemory   ‚îÇ ‚Üê –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ BlueprintTrack. ‚îÇ ‚Üê –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ProceduralMemory‚îÇ ‚Üê –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ SemanticMemory  ‚îÇ ‚Üê –ö–æ–Ω—Ü–µ–ø—Ç—ã –∏ –∑–Ω–∞–Ω–∏—è
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ EpisodicMemory  ‚îÇ ‚Üê –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è

- **BM25 Index** - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- **Vector Index** - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- **Graph Index** - —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
try:
    event = pipeline.ingest_document("document.pdf")
except FileNotFoundError:
    print("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω")
except ValueError as e:
    print(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {e}")
except Exception as e:
    print(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
stats = pipeline.get_statistics()
print(f"–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {stats['documents_processed']}")
print(f"–ß–∞–Ω–∫–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: {stats['chunks_created']}") 
print(f"–û—à–∏–±–æ–∫: {stats['errors']}")

# –°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
pipeline.reset_statistics()
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

```python
class CustomTextExtractor(TextExtractor):
    @staticmethod
    def extract_text_from_custom(file_path: str) -> Tuple[str, DocumentMetadata]:
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
        pass

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ pipeline
pipeline.text_extractor = CustomTextExtractor()
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

```python
def custom_validator(file_path: str) -> bool:
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    return True

pipeline.validate_file = custom_validator
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt
- Git (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏)

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/ingest/
‚îú‚îÄ‚îÄ __init__.py              # –≠–∫—Å–ø–æ—Ä—Ç—ã –∫–ª–∞—Å—Å–æ–≤
‚îú‚îÄ‚îÄ loader.py               # –û—Å–Ω–æ–≤–Ω–æ–π IngestPipeline
‚îú‚îÄ‚îÄ example_usage.py        # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ pdf_ingest.py          # PDF –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∑–∞–≥–ª—É—à–∫–∞)
‚îú‚îÄ‚îÄ audio_ingest.py        # –ê—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ image_ingest.py        # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ ingestion_models.py    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ cross_modal_links.py   # –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—è–º–∏
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.getLogger('ingest.loader').setLevel(logging.DEBUG)

# –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç:
# - –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
# - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏  
# - –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
# - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–π
```

–≠—Ç–æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π IngestPipeline –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ —Å–∏—Å—Ç–µ–º—É –ø–∞–º—è—Ç–∏ Rebecca Platform!